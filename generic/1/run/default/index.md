---
title: Running the ParaMonte C/C++/Fortran applications
tags: [multivariate, normal, sampling, paradram]
keywords: runtime, mpiexec, MPI, ParaDRAM, C, C++, Fortran
#summary: "."
sidebar: home_sidebar
#permalink: /program-units/functions/index.html
last_updated: January 1, 2020
mathjax: true
---

{% comment %}
1. [web-link](){:target="_blank"}
C/C++ examples documentation is currently being developed. Please check back in a few days, or contact the authors for quick help.  
{% highlight batch %}
{% endhighlight %}
{% endcomment %}

<div id="toc"></div>  

{% include important.macos.sip.md %}  

## Running the executable generated by **the quick automated approach**  

If you have used the application build-scripts provided along with each of the prebuilt ParaMonte libraries to build your C/C++/Fortran application, you can follow the guidelines below to run your application.

### Running the executable generated via the quick automated approach on **Windows**  

The current version of the Batch build-script `build.bat` that comes with the prebuilt ParaMonte libraries, both builds and runs your application. 

{{site.data.alerts.note}}
If the ParaMonte library that you are using has been built for parallel simulations and you intend to run your application in parallel, then you can set the runtime number of processors to be used for your simulation (for example, 2, in the following command) via,  
<pre>
set nproc=2
</pre>
<b>This assignment must be done before calling the build-script.</b> If you do not set a value for <code>nproc</code>, the default value of 3 will be used by the build script to run your parallel application.
{{site.data.alerts.end}}

To **rerun** an executable, follow the instructions below on this page for [serial](#running-the-manually-generated-executable-on-a-single-processor) and [parallel](#running-the-manually-generated-executable-on-multiple-processors-on-windows) simulations. 

### Running the executable generated via the quick automated approach on **Linux / macOS**  

The current version of the Bash build-script `build.sh` that comes with the prebuilt ParaMonte libraries, generates another Bash script `run.sh` (in the same working directory) which can be called on the command-line to run the generated executable.  
{{site.data.alerts.note}}
If the ParaMonte library that you are using has been built for parallel simulations and you intend to run your application in parallel, then you can set the runtime number of processors to be used for your simulation (for example, 2, in the following command) via,
<pre>
./run --nproc 2
</pre>
or,  
<pre>
./run -n 2
</pre>
This will run your parallel application on two processors. The default value for the number of processors is 3 in the build-script.  
{{site.data.alerts.end}}
{{site.data.alerts.tip}}
There are a several options that can be specified at the time of calling the <b><code>build.sh</code></b> script, including the option to set the default number of MPI- or Coarray- parallel tasks. To get help on the options, try, 
<pre>
./build.sh -h
</pre>
or,  
<pre>
./build.sh --help
</pre>
{{site.data.alerts.end}}

## Running the manually-generated executable via **do-it-yourself approach**  

The instructions slightly vary across different Operating Systems (OS), depending on the parallelism-paradigm used in your application.  

### Running the manually-generated executable **on a single processor**  

To run an executable (`main.exe`) built for serial simulations on either Windows, Linux, or macOS (Darwin), simply type the executable's name on the command line,  
```bash
main.exe
```  

### Running the manually-generated executable **on multiple processors**  

{% include run.parallel.warning.md %}

#### Running the manually-generated executable on multiple processors on **Windows**  

-   **MPI-parallelism**  
    To run an executable (`main.exe`) built for **MPI-parallel-simulations** on a single node of multiple processors, for example on a single computer, invoke the MPI launcher `mpiexec` on the command line,  
    ```batch
    mpiexec -localonly -n 3 main.exe
    ```  
    where the flag `-localonly` ensures that the simulation is run only on a single node. This option avoids the invocation of the Hydra service which would require prior registration of the service. The flag `-n 3` assigns three MPI tasks to three physical processors for the simulation. Change the number 3 to as many processor counts as you wish to use.  
    {% include tip.html content='To run your simulation on a cluster of nodes, follow [the guidelines and instructions provided by the Intel MPI library development team](https://software.intel.com/en-us/mpi-developer-reference-windows-global-options){:target="_blank"}.' %}

-   **Coarray-parallelism**  
    -   **Set the number of parallel images** (that is, the number of **processors** or **parallel tasks**) with which you want to run your application. Assuming you have built your application via the Intel Parallel Studio compilers, you can request a specific number of runtime processors by (re)defining the `FOR_COARRAY_NUM_IMAGES` environmental variable on the command-prompt. For example to run a coarray-enabled ParaMonte application on 3 processors,  
    ```batch
    set FOR_COARRAY_NUM_IMAGES=3
    ```  
    If this variable is undefined at runtime, the application will, by default, use all of the available processors on the system for the parallel simulation.  
    - **Run the Coarray-enabled parallel ParaMonte application** by simply calling the executable's name on the command line,  
    ```text
    main.exe
    ```  

#### Running the manually-generated executable on multiple processors on **Linux / macOS**  

-   **MPI-parallelism**  
    To run an executable (`main.exe`) built for **MPI-parallel-simulations** on multiple processors, invoke the MPI launcher `mpiexec` on the command line,  
    ```bash
    mpiexec -n 3 main.exe
    ```  
    The flag `-n 3` assigns three MPI tasks to three physical processors for the simulation. Change the number 3 to as many processor counts as you wish to use.  
    {% include note.html content='Some supercomputing centers (for example, the Texas Advanced Computing Center) may have their dedicated MPI launchers other than **`mpiexec`** to run applications in parallel. A prime example of this is **`ibrun`**. Consult your supercomputing center to ensure you invoke the right MPI launcher for parallel applications, in particular when running the application on a cluster of nodes of multiple processors.' %}

-   **Coarray-parallelism**  
    Running Coarray-enabled parallel applications on Unix-like systems depends on the choice of compiler you have made to build your application.  
    -   To run Coarray-parallel applications built **via the Intel Parallel Studio tools**, see [the Intel's tutorial page](https://software.intel.com/en-us/fortran-compiler-coarray-tutorial){:target="_blank"} on the [Coarray usage](https://software.intel.com/en-us/fortran-compiler-developer-guide-and-reference-using-coarrays){:target="_blank"}.  
    -   To run Coarray-parallel applications **built via the OpenCoarrays**, you should use the dedicated OpenCoarrays launcher `cafrun`. For more information, visit the [OpenCoarrays development page on GitHub](https://github.com/sourceryinstitute/OpenCoarrays/blob/master/GETTING_STARTED.md){:target="_blank"}.  

{% include askme.html %}
{% include links.html %}
